# axiosbridge

A wrapper for axios that converts `Promises` from incoming responses
into `Monads`.

<b>Usage</b>:

```typescript
import axiosbridge from "axiosbridge";

const bridge = new axiosbridge.Bridge({
  baseURL: "https://www.google.com",
});

(async () => await axiosbridge.execSafeAsync(
  async () => bridge.get("/"),
  {
    onFulfilled: (result) => console.dir(result),
    onError: (error) => console.error(error),
    _finally: () => console.log("I get logged after the handlers are done in both cases."),
  }
))();
```

# API

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### Table of Contents

* [Bridge](#bridge)
    *   [Parameters](#parameters)
    *   [axios\_instance](#axios_instance)
    *   [connection\_timeout](#connection_timeout)
    *   [get](#get)
        *   [Parameters](#parameters-1)
    *   [post](#post)
        *   [Parameters](#parameters-2)
    *   [patch](#patch)
        *   [Parameters](#parameters-3)
    *   [put](#put)
        *   [Parameters](#parameters-4)
    *   [delete](#delete)
        *   [Parameters](#parameters-5)
    *   [setErrorConstructor](#seterrorconstructor)
        *   [Parameters](#parameters-6) 
* [convertPromiseToResult](#convertpromisetoresult)
    *   [Parameters](#parameters-7)
* [execSafeAsync](#execsafeasync)
    *   [Parameters](#parameters-8)
* [cleanableExec](#cleanableexec)
    *   [Parameters](#parameters-9)
* [cleanableSafeAsyncExec](#cleanablesafeasyncexec)
    *   [Parameters](#parameters-10)
* [processAbortController](#processabortcontroller)
    *   [Parameters](#parameters-11)
* [PromiseToResultConverterConfig](#promisetoresultconverterconfig)
    *   [Properties](#properties)
    *   [logErrors](#logerrors)
* [SafeAsyncExecHandlers](#safeasyncexechandlers)
    *   [Properties](#properties-1)
    *   [onFulfilled](#onfulfilled)
    *   [onError](#onerror)
    *   [onNone](#onnone)
    *   [\_finally](#_finally)
* [CleanableExecOnCleanConfig](#cleanableexeconcleanconfig)
    *   [Properties](#properties-2)
    *   [handler](#handler)
    *   [cleanAfter](#cleanafter)
* [CleanableSafeAsyncExecHandlers](#cleanablesafeasyncexechandlers)
    *   [onClean](#onclean)
* [DEFAULT\_CONNECTION\_TIME\_OUT](#default_connection_time_out)
* [DEFAULT\_REQUEST\_TIME\_OUT](#default_request_time_out)
* [Option](#option)
* [Result](#result)
* [AbortController](#abortcontroller)
* [AxiosInstance](#axiosinstance)
* [CreateAxiosDefaults](#createaxiosdefaults)
* [AxiosRequestConfig](#axiosrequestconfig)
* [AxiosResponse](#axiosresponse)
## Bridge

A wrapper for an axios instance that
converts the returned Promises in to
Results when a request is made.

### Parameters

*   `config` **[CreateAxiosDefaults](#createaxiosdefaults)?** The axios create defaults.
*   `createFunction` **function (config: [CreateAxiosDefaults](#createaxiosdefaults)): [AxiosInstance](#axiosinstance)?** The axios create function.

### axios\_instance

Main axios instance to be used for all requests

Type: [AxiosInstance](#axiosinstance)

### connection\_timeout

Time before giving up on server
discovery.

### get

Request fetch

#### Parameters

*   `route` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)**&#x20;
*   `config` **[AxiosRequestConfig](#axiosrequestconfig)?**&#x20;

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)<[Result](#result)<[Option](#option)\<T>, E>>**&#x20;

### post

Request create

#### Parameters

*   `route` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)**&#x20;
*   `data` **T**&#x20;
*   `config` **[AxiosRequestConfig](#axiosrequestconfig)?**&#x20;

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)<[Result](#result)<[Option](#option)\<H>, E>>**&#x20;

### patch

Request patch

#### Parameters

*   `route` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)**&#x20;
*   `data` **T?**&#x20;
*   `config` **[AxiosRequestConfig](#axiosrequestconfig)?**&#x20;

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)<[Result](#result)<[Option](#option)\<H>, E>>**&#x20;

### put

Request update

#### Parameters

*   `route` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)**&#x20;
*   `data` **T?**&#x20;
*   `config` **[AxiosRequestConfig](#axiosrequestconfig)?**&#x20;

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)<[Result](#result)<[Option](#option)\<H>, E>>**&#x20;

### delete

Request delete

#### Parameters

*   `route` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)**&#x20;
*   `config` **[AxiosRequestConfig](#axiosrequestconfig)?**&#x20;

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)<[Result](#result)<[Option](#option)\<T>, E>>**&#x20;

### setErrorConstructor

Sets the error constructor.

#### Parameters

* `errorConstructor` **function (err: any): E** New error constructor

## convertPromiseToResult

Runs the provided function and if it throws
an error it catches and logs then it converts
Promise to a Result before returning it.

### Parameters

*   `_function` **function (...args: any): [Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)\<T>** The function to be run
*   `onReject` **function (err: any): E?** Runs if the function throws an error
*   `onFulfill` **function (result: T): T** Runs if the function completes successfully (optional, default `(result:T)=>result`)
*   `config` **[PromiseToResultConverterConfig](#promisetoresultconverterconfig)** Configuration for the convertor (optional, default `{logErrors:false}`)
*   `errorConstructor` **function (err: any): E?** Transforms one type of error into another

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)<[Result](#result)\<T, E>>**&#x20;

## execSafeAsync

Runs an async function that will always resolve to
a Result and runs the proper handler with the resulting
value.

### Parameters

*   `_function` **function (): [Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)<[Result](#result)<[Option](#option)\<T>, E>>** The function to be run
*   `handlers` **[SafeAsyncExecHandlers](#safeasyncexechandlers)\<T, E, F>** The handlers for the execution result

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)<(F | void)>**&#x20;

## cleanableExec

Delays the execution of a function
by the provided delay and returns a cleanup
function to clean the timeout later.
The delay is `0` by default.

<b>N.B.</b> This is to be used for
calling asynchronous tasks in `useEffect`s
that execute on mount.

### Parameters

*   `_function` **function (): void** The function to be run
*   `delay`  The delay after which the function is to be run (optional, default `0`)
*   `onClean` **[CleanableExecOnCleanConfig](#cleanableexeconcleanconfig)?** Handler configuration for cleanup

## cleanableSafeAsyncExec

Wraps cleanable \[execSafeAsync] in a {cleanableExec}

### Parameters

*   `_function` **function (): [Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)<[Result](#result)<[Option](#option)\<T>, E>>** The function to be run
*   `handlers` **[CleanableSafeAsyncExecHandlers](#cleanablesafeasyncexechandlers)\<T, E, F>** The handlers for the execution result
*   `delay` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)?** The delay after which the function is to
    be run

## processAbortController

It aborts if an external controller is provided
and produces a new controller if not.

### Parameters

*   `controller` **[AbortController](#abortcontroller)?**&#x20;

## PromiseToResultConverterConfig

Type: {logErrors: [boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean)}

### Properties

*   `logErrors` **[boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean)**&#x20;

### logErrors

Determines whether the converter logs
errors when the function being run
throws.

Type: [boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean)

## SafeAsyncExecHandlers

Type: {onFulfilled: function (value: T): void, onError: function (error: E): void?, onNone: function (): void?, \_finally: function (): (F | void)?}

### Properties

*   `onFulfilled` **function (value: T): void**&#x20;
*   `onError` **function (error: E): void?**&#x20;
*   `onNone` **function (): void?**&#x20;
*   `_finally` **function (): (F | void)?**&#x20;

### onFulfilled

Runs if the execution resolved without
errors, and it yields a non-empty value.

Type: function (value: T): void

### onError

Runs if the execution fails.

Type: function (error: E): void

### onNone

Runs if the execution is resolved without
errors, but it yields an empty value.

Type: function (): void

### \_finally

Runs after all other handlers without condition
if provided.

Type: function (): (F | void)

## CleanableExecOnCleanConfig

Type: {handler: function (): void, cleanAfter: [boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean)?}

### Properties

*   `handler` **function (): void**&#x20;
*   `cleanAfter` **[boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean)?**&#x20;

### handler

The function to be appended.

Type: function (): void

### cleanAfter

Determines whether to run the function after
the timeout clean up. If `true` it runs the
function after.

Type: [boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean)

## CleanableSafeAsyncExecHandlers

Type: {onFulfilled: function (value: T): void, onError: function (error: E): void?, onNone: function (): void?, \_finally: function (): (F | void)?, onClean: [CleanableExecOnCleanConfig](#cleanableexeconcleanconfig)?}

### Properties

*   `onFulfilled` **function (value: T): void**&#x20;
*   `onError` **function (error: E): void?**&#x20;
*   `onNone` **function (): void?**&#x20;
*   `_finally` **function (): (F | void)?**&#x20;
*   `onClean` **[CleanableExecOnCleanConfig](#cleanableexeconcleanconfig)?**&#x20;

### onFulfilled

Runs if the execution resolved without
errors, and it yields a non-empty value.

Type: function (value: T): void

### onError

Runs if the execution fails.

Type: function (error: E): void

### onNone

Runs if the execution is resolved without
errors, but it yields an empty value.

Type: function (): void

### \_finally

Runs after all other handlers without condition
if provided.

Type: function (): (F | void)

### onClean

Appended to the cleaner function that is
returned from a cleanable execution.

Type: [CleanableExecOnCleanConfig](#cleanableexeconcleanconfig)

## DEFAULT\_CONNECTION\_TIME\_OUT

Time before giving up on server
discovery.

Type: [number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)

## DEFAULT\_REQUEST\_TIME\_OUT

Time before giving up on response from a
server after a handshake.

Type: [number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)

## Option

*   **See**: <https://gcanti.github.io/fp-ts/modules/Option.ts.html>

## Result

*   **See**: <https://github.com/vultix/ts-results#readme>

## AbortController

*   **See**: <https://developer.mozilla.org/en-US/docs/Web/API/AbortController>

## AxiosInstance

*   **See**: <https://axios-http.com/docs/instance>

## CreateAxiosDefaults

*   **See**: <https://axios-http.com/docs/req_config>

## AxiosRequestConfig

*   **See**: <https://axios-http.com/docs/req_config>

## AxiosResponse

*   **See**: <https://axios-http.com/docs/res_schema>
